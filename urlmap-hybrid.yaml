name: urlmap-hybrid
defaultService: https://www.googleapis.com/compute/v1/projects/formation-gcp-networking-2025/global/backendServices/backend-web
hostRules:
- hosts:
  - "*"
  pathMatcher: hybrid-matcher
pathMatchers:
- name: hybrid-matcher
  defaultService: https://www.googleapis.com/compute/v1/projects/formation-gcp-networking-2025/global/backendServices/backend-web
  routeRules:
  # Traffic splitting entre GCP et on-premise
  - priority: 1
    matchRules:
    - prefixMatch: /
    routeAction:
      weightedBackendServices:
      - backendService: https://www.googleapis.com/compute/v1/projects/formation-gcp-networking-2025/global/backendServices/backend-web
        weight: 80
      - backendService: https://www.googleapis.com/compute/v1/projects/formation-gcp-networking-2025/global/backendServices/backend-hybrid
        weight: 20
